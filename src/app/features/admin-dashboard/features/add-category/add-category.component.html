<h2 class="font-bold text-xl">Category Details</h2>
<form [formGroup]="categoryForm" class="flex flex-col gap-10 min-h-screen">
  <section>
    <app-custom-input
      id="categoryName"
      label="Category Name"
      type="text"
      placeholder="Enter category name"
      [formControl]="$any(categoryForm.controls['categoryName'])"
    />
  </section>
  <section>
    <h2 class="font-[500]">Incompatible Attributes</h2>
    <section class="grid grid-cols-2 gap-x-10">
      <label class="flex flex-col mt-4 gap-0.5" for="attributesInput">
        <span>Attributes</span>
        <input
          type="text"
          id="attributesInput"
          placeholder="Select an option"
          class="w-full border-[1.5px] placeholder:text-figma-gray outline-figma-green px-4 py-2 rounded-md"
          aria-label="Number"
          matInput
          [formControl]="$any(categoryForm.controls['attributesInput'])"
          [matAutocomplete]="attributesInput"
        />
        <mat-autocomplete
          (optionSelected)="optionSelected($event)"
          [hideSingleSelectionIndicator]="true"
          [displayWith]="displayFn"
          #attributesInput="matAutocomplete"
        >
          @for (option of localAttributes; track option) {
          <mat-option [value]="option" class="relative">
            <span>
              {{ option.attributeName }}
            </span>
          </mat-option>
          }
        </mat-autocomplete>
      </label>
      <ng-container *ngIf="selectedAttributes | async as variantsForAttribute">
      <label class="flex flex-col mt-4 gap-0.5" for="variants">
        <span>Variants</span>
        <input
          type="text"
          id="variants"
          placeholder="Select an option"
          class="w-full border-[1.5px] placeholder:text-figma-gray outline-figma-green px-4 py-2 rounded-md"
          aria-label="Number"
          matInput
          [formControl]="$any(categoryForm.controls['variants'])"
          [matAutocomplete]="variants"
        />
          <mat-autocomplete
            (optionSelected)="variantSelected($event)"
            [hideSingleSelectionIndicator]="true"
            [displayWith]="variantDisplay"
            #variants="matAutocomplete"
          >
            @for (option of variantsForAttribute; track option) {
            <mat-option [value]="option" class="relative">
              <span>
                {{ option.optionName }}
              </span>
            </mat-option>
            }
          </mat-autocomplete>
        </label>
      </ng-container>

    </section>
  </section>
  <ng-container *ngIf="attributes | async as attributes" `>
    <section>
      <h2 class="font-[500]">Base Configuration</h2>
      <section class="grid grid-cols-2 gap-x-10">
        @for (attribute of attributes; track $index) {
        <label
          class="flex flex-col mt-4 gap-0.5"
          [for]="'#' + attribute.attributeName"
        >
          <span>{{ attribute.attributeName }}</span>
          <select
            class="w-full border-[1.5px] placeholder:text-figma-gray outline-figma-green px-4 py-2 rounded-md"
            [id]="'#' + attribute.attributeName"
            [name]="'#' + attribute.attributeName"
            [formControl]="$any(categoryForm.controls[attribute.attributeName])"
          >
            <option value="" selected>Select an option</option>
            <option
              *ngFor="let option of attribute.attributeOptions"
              [value]="option.optionName"
            >
              {{ option.optionName }}
            </option>
          </select>
        </label>
        }
      </section>
    </section>
  </ng-container>
</form>
